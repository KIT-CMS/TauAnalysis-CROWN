{
  "schema_version": 2,
  "corrections": [
    { "name": "DeepTau2017v2p1VSjet",
      "description": "dm-pt-dependent tau ID scale factor for tau embedded samples",
      "version": 0,
      "inputs": [
        { "name": "pt",
          "type": "real",
          "description": "Reconstructed tau pT"
        },
        { "name": "dm",
          "type": "int",
          "description": "Reconstructed tau decay mode: 0, 1, 10, 11"
        },
        { "name": "genmatch",
          "type": "int",
          "description": "genmatch: 0 or 6 = unmatched or jet, 1 or 3 = electron, 2 or 4 = muon, 5 = real tau"
        },
        { "name": "wp",
          "type": "string",
          "description": "DeepTau2017v2p1VSjet working point: Medium,Tight"
        },
        { "name": "wp_VSe",
          "type": "string",
          "description": "DeepTau2017v2p1VSe working point: VVLoose"
        },
        { "name": "syst",
          "type": "string",
          "description": "Systematic variations: 'nom', 'up', 'down'"
        },
        { "name": "flag",
          "type": "string",
          "description": "Flag: 'pt' = DM-pT-dependent SFs(20,40,200), 'dm' = DM-dependent SFs with pt>=20"
        }
      ],
      "output": {
        "name": "sf",
        "type": "real",
        "description": "pT-dependent scale factor"
      },
      "data": {
        "nodetype": "category",
        "input": "flag",
        "content": [
          { "key": "pt",
            "value": {
              "nodetype": "category",
              "input": "genmatch",
              "content": [
                { "key": 0, "value": 1.0 },
                { "key": 1, "value": 1.0 },
                { "key": 2, "value": 1.0 },
                { "key": 3, "value": 1.0 },
                { "key": 4, "value": 1.0 },
                { "key": 6, "value": 1.0 },
                { "key": 5,
                  "value": {
                    "nodetype": "category",
                    "input": "wp",
                    "content": [
                      { "key": "Medium",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9041073322296143 },
                                            { "key": "up", "value": 0.938431978225708 },
                                            { "key": "down", "value": 0.8700001239776611 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9897915124893188 },
                                            { "key": "up", "value": 1.0742210149765015 },
                                            { "key": "down", "value": 0.9222806692123413 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.024378776550293 },
                                            { "key": "up", "value": 1.0493718385696411 },
                                            { "key": "down", "value": 0.9993594884872437 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.0301284790039062 },
                                            { "key": "up", "value": 1.093400239944458 },
                                            { "key": "down", "value": 0.9619489908218384 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.8796598315238953 },
                                            { "key": "up", "value": 0.9203035235404968 },
                                            { "key": "down", "value": 0.8386170864105225 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.0066989660263062 },
                                            { "key": "up", "value": 1.0350897312164307 },
                                            { "key": "down", "value": 0.9753485321998596 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.8796598315238953 },
                                            { "key": "up", "value": 0.9203035235404968 },
                                            { "key": "down", "value": 0.8386170864105225 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.0066989660263062 },
                                            { "key": "up", "value": 1.0350897312164307 },
                                            { "key": "down", "value": 0.9753485321998596 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      { "key": "Tight",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.8867971897125244 },
                                            { "key": "up", "value": 0.915530800819397 },
                                            { "key": "down", "value": 0.8538045883178711 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9800187349319458 },
                                            { "key": "up", "value": 1.0422247648239136 },
                                            { "key": "down", "value": 0.9192838668823242 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.010864019393921 },
                                            { "key": "up", "value": 1.0321357250213623 },
                                            { "key": "down", "value": 0.9844880700111389 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9318289160728455 },
                                            { "key": "up", "value": 0.9932339191436768 },
                                            { "key": "down", "value": 0.8916316628456116 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9126336574554443 },
                                            { "key": "up", "value": 0.9493762850761414 },
                                            { "key": "down", "value": 0.8842968344688416 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9744271039962769 },
                                            { "key": "up", "value": 1.0034191608428955 },
                                            { "key": "down", "value": 0.927401602268219 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 40.0, 200.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9126336574554443 },
                                            { "key": "up", "value": 0.9493762850761414 },
                                            { "key": "down", "value": 0.8842968344688416 }
                                          ]
                                        },
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9744271039962769 },
                                            { "key": "up", "value": 1.0034191608428955 },
                                            { "key": "down", "value": 0.927401602268219 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          { "key": "dm",
            "value": {
              "nodetype": "category",
              "input": "genmatch",
              "content": [
                { "key": 0, "value": 1.0 },
                { "key": 1, "value": 1.0 },
                { "key": 2, "value": 1.0 },
                { "key": 3, "value": 1.0 },
                { "key": 4, "value": 1.0 },
                { "key": 6, "value": 1.0 },
                { "key": 5,
                  "value": {
                    "nodetype": "category",
                    "input": "wp",
                    "content": [
                      { "key": "Medium",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9195696115493774 },
                                            { "key": "up", "value": 0.9552866220474243 },
                                            { "key": "down", "value": 0.8874199390411377 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.0386428833007812 },
                                            { "key": "up", "value": 1.0596729516983032 },
                                            { "key": "down", "value": 1.0099656581878662 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9362536668777466 },
                                            { "key": "up", "value": 0.9705929756164551 },
                                            { "key": "down", "value": 0.9023165106773376 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9362536668777466 },
                                            { "key": "up", "value": 0.9705929756164551 },
                                            { "key": "down", "value": 0.9023165106773376 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      { "key": "Tight",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9052191376686096 },
                                            { "key": "up", "value": 0.9307747483253479 },
                                            { "key": "down", "value": 0.8800114393234253 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 1.0209935903549194 },
                                            { "key": "up", "value": 1.0463038682937622 },
                                            { "key": "down", "value": 0.9956609010696411 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9139007925987244 },
                                            { "key": "up", "value": 0.9476093053817749 },
                                            { "key": "down", "value": 0.886145830154419 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "binning",
                                      "input": "pt",
                                      "edges": [ 20.0, 100000.0 ],
                                      "content": [
                                        { "nodetype": "category",
                                          "input": "syst",
                                          "content": [
                                            { "key": "nom", "value": 0.9139007925987244 },
                                            { "key": "up", "value": 0.9476093053817749 },
                                            { "key": "down", "value": 0.886145830154419 }
                                          ]
                                        }
                                      ],
                                      "flow": "clamp"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    },
    { "name": "tau_energy_scale",
      "description": "dm-pt-dependent tau ID scale factor for tau embedded samples",
      "version": 0,
      "inputs": [
        { "name": "pt",
          "type": "real",
          "description": "Reconstructed tau pT"
        },
        { "name": "eta",
          "type": "real",
          "description": "Reconstructed tau eta"
        },
        { "name": "dm",
          "type": "int",
          "description": "Reconstructed tau decay mode: 0, 1, 10, 11"
        },
        { "name": "genmatch",
          "type": "int",
          "description": "genmatch: 0 or 6 = unmatched or jet, 1 or 3 = electron, 2 or 4 = muon, 5 = real tau"
        },
        { "name": "id",
          "type": "string",
          "description": "DeepTau2017v2p1:DeepTau2017v2p1"
        },
        { "name": "wp",
          "type": "string",
          "description": "DeepTau2017v2p1VSjet working point: Medium,Tight"
        },
        { "name": "wp_VSe",
          "type": "string",
          "description": "DeepTau2017v2p1VSe working point: VVLoose"
        },
        { "name": "syst",
          "type": "string",
          "description": "Systematic variations: 'nom', 'up', 'down'"
        }
      ],
      "output": {
        "name": "tes",
        "type": "real",
        "description": "DM-pT-dependent tau energy scale"
      },
      "data": {
        "nodetype": "category",
        "input": "id",
        "content": [
          { "key": "DeepTau2017v2p1",
            "value": {
              "nodetype": "category",
              "input": "genmatch",
              "content": [
                { "key": 0, "value": 1.0 },
                { "key": 1, "value": 1.0 },
                { "key": 2, "value": 1.0 },
                { "key": 3, "value": 1.0 },
                { "key": 4, "value": 1.0 },
                { "key": 6, "value": 1.0 },
                { "key": 5,
                  "value": {
                    "nodetype": "category",
                    "input": "wp",
                    "content": [
                      { "key": "Medium",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0258251905441285 },
                                                  { "key": "up", "value": 1.0438248825073242 },
                                                  { "key": "down", "value": 1.004024415910244 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9833694958686828 },
                                                  { "key": "up", "value": 0.9937960433959961 },
                                                  { "key": "down", "value": 0.9690936207771301 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9900695371627808 },
                                                  { "key": "up", "value": 1.006399564743042 },
                                                  { "key": "down", "value": 0.975713586807251 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9930002683401108 },
                                                  { "key": "up", "value": 1.0054375177621842 },
                                                  { "key": "down", "value": 0.9803774547576904 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9819481158256531 },
                                                  { "key": "up", "value": 1.0256360578536987 },
                                                  { "key": "down", "value": 0.9724766206741333 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9885914659500122 },
                                                  { "key": "up", "value": 0.9967860007286071 },
                                                  { "key": "down", "value": 0.9787074947357177 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9819481158256531 },
                                                  { "key": "up", "value": 1.0256360578536987 },
                                                  { "key": "down", "value": 0.9724766206741333 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9885914659500122 },
                                                  { "key": "up", "value": 0.9967860007286071 },
                                                  { "key": "down", "value": 0.9787074947357177 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      { "key": "Tight",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0167805182933807 },
                                                  { "key": "up", "value": 1.0385419249534606 },
                                                  { "key": "down", "value": 1.0043244987726212 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9830012083053589 },
                                                  { "key": "up", "value": 0.9939965170621872 },
                                                  { "key": "down", "value": 0.9712890744209289 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9720813012123108 },
                                                  { "key": "up", "value": 0.9871219503879547 },
                                                  { "key": "down", "value": 0.9587645196914673 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0100044190883637 },
                                                  { "key": "up", "value": 1.0178979957103729 },
                                                  { "key": "down", "value": 1.001673413068056 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0157464480400085 },
                                                  { "key": "up", "value": 1.0424670553207398 },
                                                  { "key": "down", "value": 0.9839890003204346 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.991694591641426 },
                                                  { "key": "up", "value": 1.0036540433764458 },
                                                  { "key": "down", "value": 0.9830663335323334 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 40.0, 200.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0157464480400085 },
                                                  { "key": "up", "value": 1.0424670553207398 },
                                                  { "key": "down", "value": 0.9839890003204346 }
                                                ]
                                              },
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.991694591641426 },
                                                  { "key": "up", "value": 1.0036540433764458 },
                                                  { "key": "down", "value": 0.9830663335323334 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    },
    { "name": "tau_energy_scale_dm_binned",
      "description": "dm-dependent tau ID scale factor for tau embedded samples",
      "version": 0,
      "inputs": [
        { "name": "pt",
          "type": "real",
          "description": "Reconstructed tau pT"
        },
        { "name": "eta",
          "type": "real",
          "description": "Reconstructed tau eta"
        },
        { "name": "dm",
          "type": "int",
          "description": "Reconstructed tau decay mode: 0, 1, 10, 11"
        },
        { "name": "genmatch",
          "type": "int",
          "description": "genmatch: 0 or 6 = unmatched or jet, 1 or 3 = electron, 2 or 4 = muon, 5 = real tau"
        },
        { "name": "id",
          "type": "string",
          "description": "DeepTau2017v2p1:DeepTau2017v2p1"
        },
        { "name": "wp",
          "type": "string",
          "description": "DeepTau2017v2p1VSjet working point: Medium,Tight"
        },
        { "name": "wp_VSe",
          "type": "string",
          "description": "DeepTau2017v2p1VSe working point: VVLoose"
        },
        { "name": "syst",
          "type": "string",
          "description": "Systematic variations: 'nom', 'up', 'down'"
        }
      ],
      "output": {
        "name": "tes",
        "type": "real",
        "description": "DM-dependent tau energy scale"
      },
      "data": {
        "nodetype": "category",
        "input": "id",
        "content": [
          { "key": "DeepTau2017v2p1",
            "value": {
              "nodetype": "category",
              "input": "genmatch",
              "content": [
                { "key": 0, "value": 1.0 },
                { "key": 1, "value": 1.0 },
                { "key": 2, "value": 1.0 },
                { "key": 3, "value": 1.0 },
                { "key": 4, "value": 1.0 },
                { "key": 6, "value": 1.0 },
                { "key": 5,
                  "value": {
                    "nodetype": "category",
                    "input": "wp",
                    "content": [
                      { "key": "Medium",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0108183085918427 },
                                                  { "key": "up", "value": 1.0207003736495972 },
                                                  { "key": "down", "value": 0.9968099549412728 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9892975616455079 },
                                                  { "key": "up", "value": 0.9966685718297958 },
                                                  { "key": "down", "value": 0.9826325726509094 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9952268078923225 },
                                                  { "key": "up", "value": 1.0045638838410378 },
                                                  { "key": "down", "value": 0.9853981828689575 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9952268078923225 },
                                                  { "key": "up", "value": 1.0045638838410378 },
                                                  { "key": "down", "value": 0.9853981828689575 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      { "key": "Tight",
                        "value": {
                          "nodetype": "category",
                          "input": "wp_VSe",
                          "content": [
                            { "key": "VVLoose",
                              "value": {
                                "nodetype": "category",
                                "input": "dm",
                                "content": [
                                  { "key": 0,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0028090447187423 },
                                                  { "key": "up", "value": 1.0116378605365752 },
                                                  { "key": "down", "value": 0.9935165739059448 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 1,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 0.9923045033216477 },
                                                  { "key": "up", "value": 0.9972191959619522 },
                                                  { "key": "down", "value": 0.9843710112571716 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 10,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0087142884731293 },
                                                  { "key": "up", "value": 1.0170010471343993 },
                                                  { "key": "down", "value": 0.9961906078457833 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  },
                                  { "key": 11,
                                    "value": {
                                      "nodetype": "transform",
                                      "input": "eta",
                                      "rule": {
                                        "nodetype": "formula",
                                        "expression": "abs(x)",
                                        "parser": "TFormula",
                                        "variables": [ "eta" ]
                                      },
                                      "content": {
                                        "nodetype": "binning",
                                        "input": "eta",
                                        "edges": [ 0.0, 2.5 ],
                                        "content": [
                                          { "nodetype": "binning",
                                            "input": "pt",
                                            "edges": [ 20.0, 100000.0 ],
                                            "content": [
                                              { "nodetype": "category",
                                                "input": "syst",
                                                "content": [
                                                  { "key": "nom", "value": 1.0087142884731293 },
                                                  { "key": "up", "value": 1.0170010471343993 },
                                                  { "key": "down", "value": 0.9961906078457833 }
                                                ]
                                              }
                                            ],
                                            "flow": "clamp"
                                          }
                                        ],
                                        "flow": "clamp"
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ]
}